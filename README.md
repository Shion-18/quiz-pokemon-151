ï¼ˆâ€»æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã¯ã€è‹±èªã®ä¸‹ã«ã‚ã‚Šã¾ã™ï¼‰
## Overview
This silhouette quiz application features 151 PokÃ©mon from PokÃ©mon Red and Green.

[Quiz Link](https://quiz-pokemon-151.vercel.app/)


## Quiz Functionality

-Displays a randomly selected PokÃ©mon silhouette
Choose the correct answer from the four options
-Instant feedback on correct or incorrect answers

-Results Display
Shows the accuracy history for all 10 questions

-Graphical score representation

-Share results on X (formerly Twitter)

-Visual representation using emojis

-Play Count
Displays the total number of plays


## Tech Stack
React
TypeScript
Vite
Tailwind CSS
Lucide React (for icons)


## Project Structure

### src/
â”œâ”€â”€ components/     # UI components  
â”œâ”€â”€ contexts/       # React contexts  
â”œâ”€â”€ data/           # PokÃ©mon data  
â”œâ”€â”€ hooks/          # Custom hooks  
â”œâ”€â”€ types/          # Type definitions  
â””â”€â”€ App.tsx         # Main application  


## Acknowledgments
PokÃ©mon image data is provided by PokeAPI(https://pokeapi.co/).



## æ¦‚è¦

ã€Œãƒã‚±ãƒƒãƒˆãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼èµ¤ãƒ»ç·‘ã€ã«ç™»å ´ã™ã‚‹151åŒ¹ã®ãƒã‚±ãƒ¢ãƒ³ã‹ã‚‰å‡ºé¡Œã•ã‚Œã‚‹ã€ã‚·ãƒ«ã‚¨ãƒƒãƒˆã‚¯ã‚¤ã‚ºãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
"https://quiz-pokemon-151.vercel.app/"

## ä¸»ãªæ©Ÿèƒ½

### ã‚¯ã‚¤ã‚ºæ©Ÿèƒ½
- ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã°ã‚ŒãŸãƒã‚±ãƒ¢ãƒ³ã®ã‚·ãƒ«ã‚¨ãƒƒãƒˆã‚’è¡¨ç¤º
- 4ã¤ã®é¸æŠè‚¢ã‹ã‚‰æ­£è§£ã‚’é¸ã¶
- æ­£è§£ãƒ»ä¸æ­£è§£ãŒã™ãã«åˆ†ã‹ã‚‹

### çµæœè¡¨ç¤º
- å…¨10å•ã®æ­£èª¤å±¥æ­´ã‚’è¡¨ç¤º
- ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ãªã‚¹ã‚³ã‚¢è¡¨ç¤º

### Xã¸ã®ã‚·ã‚§ã‚¢æ©Ÿèƒ½
- çµµæ–‡å­—ã‚’ç”¨ã„ãŸè¦–è¦šçš„ãªçµæœè¡¨ç¤º

### ãƒ—ãƒ¬ã‚¤å›æ•°ã‚«ã‚¦ãƒ³ãƒˆ
- ç´¯è¨ˆãƒ—ãƒ¬ã‚¤å›æ•°ã®è¡¨ç¤º


## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- React
- TypeScript
- Vite
- Tailwind CSS
- Lucide React (ã‚¢ã‚¤ã‚³ãƒ³)


## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
src/
â”œâ”€â”€ components/     # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ contexts/       # Reactã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â”œâ”€â”€ data/          # ãƒã‚±ãƒ¢ãƒ³ã®ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ hooks/         # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ types/         # å‹å®šç¾©
â””â”€â”€ App.tsx        # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
```


## ãƒ†ã‚¹ãƒˆè¨ˆç”»

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æƒ³å®šã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã™ã€‚

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: Vitest + React Testing Library
- **E2Eãƒ†ã‚¹ãƒˆ**: Playwright

---

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ10æœ¬ï¼‰

#### 1. `useQuiz` ãƒ•ãƒƒã‚¯ â€” ã‚¯ã‚¤ã‚ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ5æœ¬ï¼‰

<details>
<summary>UT-01: generateQuestion ãŒæ­£ã—ã„å½¢å¼ã®å•é¡Œã‚’ç”Ÿæˆã™ã‚‹</summary>

```ts
// src/hooks/__tests__/useQuiz.test.ts
import { renderHook, act } from '@testing-library/react';
import { useQuiz } from '../useQuiz';

describe('useQuiz', () => {
  beforeEach(() => {
    localStorage.clear();
  });

  it('generateQuestion ãŒ4æŠã®å•é¡Œã‚’æ­£ã—ãç”Ÿæˆã™ã‚‹', () => {
    const { result } = renderHook(() => useQuiz());

    act(() => {
      result.current.generateQuestion();
    });

    const question = result.current.currentQuestion;
    expect(question).not.toBeNull();
    expect(question!.options).toHaveLength(4);
    expect(question!.correctAnswer).toBeTruthy();
    // æ­£è§£ãŒé¸æŠè‚¢ã«å«ã¾ã‚Œã¦ã„ã‚‹
    expect(question!.options).toContain(question!.correctAnswer);
    // ãƒã‚±ãƒ¢ãƒ³ã®æ—¥æœ¬èªåãŒæ­£è§£ã¨ä¸€è‡´ã™ã‚‹
    expect(question!.pokemon.name.japanese).toBe(question!.correctAnswer);
  });
});
```
</details>

<details>
<summary>UT-02: é¸æŠè‚¢ã«é‡è¤‡ãŒãªã„</summary>

```ts
it('ç”Ÿæˆã•ã‚Œã‚‹4ã¤ã®é¸æŠè‚¢ãŒã™ã¹ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ã‚ã‚‹', () => {
  const { result } = renderHook(() => useQuiz());

  // è¤‡æ•°å›ç”Ÿæˆã—ã¦ã™ã¹ã¦æ¤œè¨¼
  for (let i = 0; i < 20; i++) {
    act(() => {
      result.current.resetQuiz();
    });
    act(() => {
      result.current.generateQuestion();
    });

    const options = result.current.currentQuestion!.options;
    const uniqueOptions = new Set(options);
    expect(uniqueOptions.size).toBe(4);
  }
});
```
</details>

<details>
<summary>UT-03: æ­£è§£æ™‚ã«ã‚¹ã‚³ã‚¢ãŒåŠ ç®—ã•ã‚Œã‚‹</summary>

```ts
it('æ­£è§£ã™ã‚‹ã¨ã‚¹ã‚³ã‚¢ãŒ+1ã•ã‚Œã€historyã«isCorrect:trueãŒè¨˜éŒ²ã•ã‚Œã‚‹', () => {
  const { result } = renderHook(() => useQuiz());

  act(() => {
    result.current.generateQuestion();
  });

  const correctAnswer = result.current.currentQuestion!.correctAnswer;

  act(() => {
    result.current.checkAnswer(correctAnswer);
  });

  expect(result.current.score).toBe(1);
  expect(result.current.history).toHaveLength(1);
  expect(result.current.history[0].isCorrect).toBe(true);
  expect(result.current.history[0].userAnswer).toBe(correctAnswer);
});
```
</details>

<details>
<summary>UT-04: ä¸æ­£è§£æ™‚ã«ã‚¹ã‚³ã‚¢ãŒå¤‰ã‚ã‚‰ãªã„</summary>

```ts
it('ä¸æ­£è§£ã ã¨ã‚¹ã‚³ã‚¢ã¯0ã®ã¾ã¾ã€historyã«isCorrect:falseãŒè¨˜éŒ²ã•ã‚Œã‚‹', () => {
  const { result } = renderHook(() => useQuiz());

  act(() => {
    result.current.generateQuestion();
  });

  const correctAnswer = result.current.currentQuestion!.correctAnswer;
  // æ­£è§£ä»¥å¤–ã®é¸æŠè‚¢ã‚’é¸ã¶
  const wrongAnswer = result.current.currentQuestion!.options
    .find(opt => opt !== correctAnswer)!;

  act(() => {
    result.current.checkAnswer(wrongAnswer);
  });

  expect(result.current.score).toBe(0);
  expect(result.current.history).toHaveLength(1);
  expect(result.current.history[0].isCorrect).toBe(false);
  expect(result.current.history[0].userAnswer).toBe(wrongAnswer);
});
```
</details>

<details>
<summary>UT-05: 10å•å®Œäº†ã§ isFinished ãŒ true ã«ãªã‚Š playCount ãŒ +1 ã•ã‚Œã‚‹</summary>

```ts
it('10å•å›ç­”å¾Œã«isFinishedãŒtrueã«ãªã‚Šã€localStorageã®playCountãŒ1ã«ãªã‚‹', () => {
  const { result } = renderHook(() => useQuiz());

  // 10å•ãƒ«ãƒ¼ãƒ—
  for (let i = 0; i < 10; i++) {
    act(() => {
      result.current.generateQuestion();
    });
    const answer = result.current.currentQuestion!.correctAnswer;
    act(() => {
      result.current.checkAnswer(answer);
    });
  }

  // 11å›ç›®ã®generateQuestionã§çµ‚äº†åˆ¤å®š
  act(() => {
    result.current.generateQuestion();
  });

  expect(result.current.isFinished).toBe(true);
  expect(result.current.playCount).toBe(1);
  expect(localStorage.getItem('pokemon-quiz-play-count')).toBe('1');
});
```
</details>

#### 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæç”»ãƒ†ã‚¹ãƒˆï¼ˆ3æœ¬ï¼‰

<details>
<summary>UT-06: QuizCard ãŒ4ã¤ã®é¸æŠè‚¢ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ã€ã‚¯ãƒªãƒƒã‚¯ã§ onAnswer ãŒå‘¼ã°ã‚Œã‚‹</summary>

```tsx
// src/components/__tests__/QuizCard.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { QuizCard } from '../QuizCard';
import type { QuizQuestion } from '../../types/pokemon';

const mockQuestion: QuizQuestion = {
  pokemon: {
    id: 25,
    name: { japanese: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦', english: 'Pikachu' },
    imageUrl: 'https://example.com/pikachu.png',
  },
  options: ['ãƒ”ã‚«ãƒãƒ¥ã‚¦', 'ãƒ©ã‚¤ãƒãƒ¥ã‚¦', 'ãƒ”ãƒãƒ¥ãƒ¼', 'ã‚¨ãƒ¢ãƒ³ã‚¬'],
  correctAnswer: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦',
};

describe('QuizCard', () => {
  it('4ã¤ã®é¸æŠè‚¢ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã€ã‚¯ãƒªãƒƒã‚¯ã§onAnswerãŒå‘¼ã°ã‚Œã‚‹', async () => {
    const onAnswer = vi.fn();
    render(<QuizCard question={mockQuestion} onAnswer={onAnswer} />);

    // 4ã¤ã®ãƒœã‚¿ãƒ³ãŒã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
    for (const option of mockQuestion.options) {
      expect(screen.getByText(option)).toBeInTheDocument();
    }

    // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨onAnswerãŒå‘¼ã°ã‚Œã‚‹
    await userEvent.click(screen.getByText('ãƒ©ã‚¤ãƒãƒ¥ã‚¦'));
    expect(onAnswer).toHaveBeenCalledWith('ãƒ©ã‚¤ãƒãƒ¥ã‚¦');
  });
});
```
</details>

<details>
<summary>UT-07: AnswerFeedback ãŒæ­£è§£/ä¸æ­£è§£ã§è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹</summary>

```tsx
// src/components/__tests__/AnswerFeedback.test.tsx
import { render, screen } from '@testing-library/react';
import { AnswerFeedback } from '../AnswerFeedback';

const basePokemon = {
  id: 25,
  name: { japanese: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦', english: 'Pikachu' },
  imageUrl: 'https://example.com/pikachu.png',
};

describe('AnswerFeedback', () => {
  it('æ­£è§£æ™‚ã«ã€Œæ­£è§£ï¼ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(
      <AnswerFeedback
        isCorrect={true}
        correctAnswer="ãƒ”ã‚«ãƒãƒ¥ã‚¦"
        userAnswer="ãƒ”ã‚«ãƒãƒ¥ã‚¦"
        pokemon={basePokemon}
        onNext={vi.fn()}
        currentQuestion={3}
        totalQuestions={10}
      />
    );

    expect(screen.getByText('æ­£è§£ï¼')).toBeInTheDocument();
    expect(screen.getByText('æ­£è§£ã¯ã€Œãƒ”ã‚«ãƒãƒ¥ã‚¦ã€ã§ã™')).toBeInTheDocument();
    // ä¸æ­£è§£æ™‚ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã€Œã‚ãªãŸã®å›ç­”ã€ãŒãªã„ã“ã¨ã‚’ç¢ºèª
    expect(screen.queryByText(/ã‚ãªãŸã®å›ç­”/)).not.toBeInTheDocument();
  });

  it('ä¸æ­£è§£æ™‚ã«ã€Œä¸æ­£è§£...ã€ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(
      <AnswerFeedback
        isCorrect={false}
        correctAnswer="ãƒ”ã‚«ãƒãƒ¥ã‚¦"
        userAnswer="ãƒ©ã‚¤ãƒãƒ¥ã‚¦"
        pokemon={basePokemon}
        onNext={vi.fn()}
        currentQuestion={3}
        totalQuestions={10}
      />
    );

    expect(screen.getByText('ä¸æ­£è§£...')).toBeInTheDocument();
    expect(screen.getByText('ã‚ãªãŸã®å›ç­”: ãƒ©ã‚¤ãƒãƒ¥ã‚¦')).toBeInTheDocument();
  });
});
```
</details>

<details>
<summary>UT-08: QuizResults ãŒå±¥æ­´ãƒ»ã‚¹ã‚³ã‚¢ãƒ»ãƒœã‚¿ãƒ³ã‚’æ­£ã—ãè¡¨ç¤ºã™ã‚‹</summary>

```tsx
// src/components/__tests__/QuizResults.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { QuizResults } from '../QuizResults';
import type { QuizHistory } from '../../hooks/useQuiz';

// 10å•åˆ†ã®ãƒ€ãƒŸãƒ¼å±¥æ­´ï¼ˆ7å•æ­£è§£ã€3å•ä¸æ­£è§£ï¼‰
const mockHistory: QuizHistory[] = Array.from({ length: 10 }, (_, i) => ({
  pokemon: {
    id: i + 1,
    name: { japanese: `ãƒã‚±ãƒ¢ãƒ³${i + 1}`, english: `Pokemon${i + 1}` },
    imageUrl: `https://example.com/${i + 1}.png`,
  },
  userAnswer: i < 7 ? `ãƒã‚±ãƒ¢ãƒ³${i + 1}` : 'ãƒã‚ºãƒ¬',
  isCorrect: i < 7,
}));

describe('QuizResults', () => {
  it('ã‚¹ã‚³ã‚¢ã€å±¥æ­´ã‚°ãƒªãƒƒãƒ‰ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async () => {
    const onReset = vi.fn();
    render(<QuizResults score={7} history={mockHistory} onReset={onReset} />);

    // ã‚¹ã‚³ã‚¢è¡¨ç¤º
    expect(screen.getByText('10å•ä¸­7å•æ­£è§£ã—ã¾ã—ãŸï¼')).toBeInTheDocument();
    expect(screen.getByText('æ­£è§£: 7å•')).toBeInTheDocument();
    expect(screen.getByText('ä¸æ­£è§£: 3å•')).toBeInTheDocument();

    // å„å•é¡Œã®å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
    expect(screen.getAllByText(/å•ç›®/)).toHaveLength(10);

    // ãƒœã‚¿ãƒ³ã®å­˜åœ¨ç¢ºèª
    expect(screen.getByText('ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤')).toBeInTheDocument();
    expect(screen.getByText('çµæœã‚’Xã§ã‚·ã‚§ã‚¢')).toBeInTheDocument();

    // ã€Œã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã€ã‚¯ãƒªãƒƒã‚¯ã§onResetãŒå‘¼ã°ã‚Œã‚‹
    await userEvent.click(screen.getByText('ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤'));
    expect(onReset).toHaveBeenCalledTimes(1);
  });
});
```
</details>

#### 3. ãƒ‡ãƒ¼ã‚¿ / ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆ2æœ¬ï¼‰

<details>
<summary>UT-09: ãƒã‚±ãƒ¢ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒ151åŒ¹åˆ†ã‚ã‚‹</summary>

```ts
// src/data/__tests__/pokemonData.test.ts
import { allPokemon } from '../index';

describe('Pokemon Data', () => {
  it('åˆä»£151åŒ¹ã®ãƒ‡ãƒ¼ã‚¿ãŒã™ã¹ã¦æƒã£ã¦ã„ã‚‹', () => {
    expect(allPokemon).toHaveLength(151);
  });

  it('å„ãƒã‚±ãƒ¢ãƒ³ãŒå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã£ã¦ã„ã‚‹', () => {
    allPokemon.forEach((pokemon) => {
      expect(pokemon.id).toBeGreaterThanOrEqual(1);
      expect(pokemon.id).toBeLessThanOrEqual(151);
      expect(pokemon.name.japanese).toBeTruthy();
      expect(pokemon.name.english).toBeTruthy();
      expect(pokemon.imageUrl).toMatch(/^https:\/\//);
    });
  });

  it('IDã«é‡è¤‡ãŒãªã„', () => {
    const ids = allPokemon.map((p) => p.id);
    expect(new Set(ids).size).toBe(151);
  });
});
```
</details>

<details>
<summary>UT-10: ã‚·ã‚§ã‚¢ãƒ†ã‚­ã‚¹ãƒˆãŒæ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ç”Ÿæˆã•ã‚Œã‚‹</summary>

```ts
// src/components/__tests__/shareText.test.ts
// QuizResults å†…ã® handleShare ãƒ­ã‚¸ãƒƒã‚¯ã‚’å˜ä½“æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆ

import type { QuizHistory } from '../../hooks/useQuiz';

// QuizResults.tsx å†…ã® handleShare ã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’é–¢æ•°ã¨ã—ã¦æŠ½å‡º
function buildShareText(score: number, history: QuizHistory[]): string {
  const totalQuestions = history.length;
  const resultEmojis = history
    .map((item, index) => `${index + 1}${item.isCorrect ? 'ğŸŸ¢' : 'âŒ'}`)
    .join('');

  return `åˆä»£ãƒã‚±ãƒ¢ãƒ³åå‰å½“ã¦ã‚¯ã‚¤ã‚º\n\n${score}/${totalQuestions}å• æ­£è§£ï¼\n${resultEmojis}\n\n#åˆä»£ãƒã‚±ãƒ¢ãƒ³åå‰å½“ã¦ã‚¯ã‚¤ã‚º\n\nhttps://quiz-pokemon-151.vercel.app/`;
}

describe('ã‚·ã‚§ã‚¢ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ', () => {
  it('ã‚¹ã‚³ã‚¢ã¨å±¥æ­´ã‹ã‚‰æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ†ã‚­ã‚¹ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹', () => {
    const history: QuizHistory[] = [
      { pokemon: { id: 1, name: { japanese: 'ãƒ•ã‚·ã‚®ãƒ€ãƒ', english: 'Bulbasaur' }, imageUrl: '' }, userAnswer: 'ãƒ•ã‚·ã‚®ãƒ€ãƒ', isCorrect: true },
      { pokemon: { id: 4, name: { japanese: 'ãƒ’ãƒˆã‚«ã‚²', english: 'Charmander' }, imageUrl: '' }, userAnswer: 'ã‚¼ãƒ‹ã‚¬ãƒ¡', isCorrect: false },
      { pokemon: { id: 7, name: { japanese: 'ã‚¼ãƒ‹ã‚¬ãƒ¡', english: 'Squirtle' }, imageUrl: '' }, userAnswer: 'ã‚¼ãƒ‹ã‚¬ãƒ¡', isCorrect: true },
    ];

    const text = buildShareText(2, history);

    expect(text).toContain('2/3å• æ­£è§£ï¼');
    expect(text).toContain('1ğŸŸ¢2âŒ3ğŸŸ¢');
    expect(text).toContain('#åˆä»£ãƒã‚±ãƒ¢ãƒ³åå‰å½“ã¦ã‚¯ã‚¤ã‚º');
    expect(text).toContain('https://quiz-pokemon-151.vercel.app/');
  });

  it('å…¨å•æ­£è§£ã®å ´åˆã€ã™ã¹ã¦ğŸŸ¢ã«ãªã‚‹', () => {
    const history: QuizHistory[] = Array.from({ length: 10 }, (_, i) => ({
      pokemon: { id: i + 1, name: { japanese: `P${i}`, english: `P${i}` }, imageUrl: '' },
      userAnswer: `P${i}`,
      isCorrect: true,
    }));

    const text = buildShareText(10, history);

    expect(text).toContain('10/10å• æ­£è§£ï¼');
    expect(text).not.toContain('âŒ');
  });
});
```
</details>

---

### E2Eãƒ†ã‚¹ãƒˆï¼ˆ5ã‚·ãƒŠãƒªã‚ªï¼‰

> Playwright ã‚’ä½¿ç”¨ã€‚`npx playwright test` ã§å®Ÿè¡Œã€‚

<details>
<summary>E2E-01: ã‚¯ã‚¤ã‚ºã‚’å…¨å•å›ç­”ã—ã¦çµæœç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹</summary>

```ts
// e2e/quiz-flow.spec.ts
import { test, expect } from '@playwright/test';

test('ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰10å•å›ç­”ã—ã¦çµæœç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('/');

  // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®ç¢ºèª
  await expect(page.getByText('åˆä»£ãƒã‚±ãƒ¢ãƒ³åå‰å½“ã¦ã‚¯ã‚¤ã‚º')).toBeVisible();
  await page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹').click();

  // 10å•å›ç­”ã™ã‚‹
  for (let i = 0; i < 10; i++) {
    // é¸æŠè‚¢ãƒœã‚¿ãƒ³ã®ã†ã¡æœ€åˆã®1ã¤ã‚’ã‚¯ãƒªãƒƒã‚¯
    const buttons = page.locator('button.bg-blue-600');
    await buttons.first().click();

    // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”»é¢ã§ã€Œæ¬¡ã®å•é¡Œã¸ã€orã€Œãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤ºã€ã‚’ã‚¯ãƒªãƒƒã‚¯
    const nextButton = page.getByText(/æ¬¡ã®å•é¡Œã¸|ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º/);
    await nextButton.click();
  }

  // çµæœç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  await expect(page.getByText(/10å•ä¸­\d+å•æ­£è§£ã—ã¾ã—ãŸ/)).toBeVisible();
  await expect(page.getByText('ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤')).toBeVisible();
  await expect(page.getByText('çµæœã‚’Xã§ã‚·ã‚§ã‚¢')).toBeVisible();
});
```
</details>

<details>
<summary>E2E-02: å…¨å•æ­£è§£ãƒ•ãƒ­ãƒ¼ï¼ˆæ­£è§£ã®é¸æŠè‚¢ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼‰</summary>

```ts
test('ã™ã¹ã¦æ­£è§£ã‚’é¸ã¶ã¨10/10ã«ãªã‚‹', async ({ page }) => {
  await page.goto('/');
  await page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹').click();

  for (let i = 0; i < 10; i++) {
    // ã‚·ãƒ«ã‚¨ãƒƒãƒˆã® alt å±æ€§ã‹ã‚‰ã¯æ­£è§£ã‚’å¾—ã‚‰ã‚Œãªã„ã®ã§ã€
    // ãƒšãƒ¼ã‚¸ã®DOMã‹ã‚‰ correctAnswer ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’ä½¿ã†
    // â€»ãƒ†ã‚¹ãƒˆç”¨ã« data-testid ã‚’è¿½åŠ ã™ã‚‹ã®ãŒç†æƒ³çš„
    // ã“ã“ã§ã¯å…¨ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã€aria/ãƒ­ã‚¸ãƒƒã‚¯ã§æ­£è§£ã‚’åˆ¤å®šã™ã‚‹

    // ç°¡æ˜“çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ: ãƒœã‚¿ãƒ³4ã¤ã®ã†ã¡ã€ã„ãšã‚Œã‹ã‚’ã‚¯ãƒªãƒƒã‚¯å¾Œ
    // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã€Œæ­£è§£ï¼ã€ã‚’ç¢ºèªã§ããŸã‚‰æ­£è§£æ‰±ã„
    // â†’ å…¨å•æ­£è§£ã‚’ä¿è¨¼ã™ã‚‹ã«ã¯ã‚¢ãƒ—ãƒªå´ã«ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒå¿…è¦

    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ data-correct å±æ€§ç­‰ã‚’ä»˜ä¸ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—:
    // const correctBtn = page.locator('button[data-correct="true"]');
    // await correctBtn.click();

    const buttons = page.locator('button.bg-blue-600');
    const count = await buttons.count();
    // å…¨ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
    for (let j = 0; j < count; j++) {
      const text = await buttons.nth(j).textContent();
      // ãƒ†ã‚¹ãƒˆç’°å¢ƒã§æ­£è§£ã‚’åˆ¤å®šã™ã‚‹ä»•çµ„ã¿ãŒå¿…è¦
    }

    // â€» ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æœ€åˆã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    await buttons.first().click();
    await page.getByText(/æ¬¡ã®å•é¡Œã¸|ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º/).click();
  }

  await expect(page.getByText(/10å•ä¸­\d+å•æ­£è§£ã—ã¾ã—ãŸ/)).toBeVisible();
});
```
</details>

<details>
<summary>E2E-03: ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã§ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã§ãã‚‹</summary>

```ts
test('çµæœç”»é¢ã‹ã‚‰ã€Œã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã€ã§ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã«æˆ»ã‚‹', async ({ page }) => {
  await page.goto('/');
  await page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹').click();

  // 10å•å›ç­”ï¼ˆæ—©é€ã‚Šï¼‰
  for (let i = 0; i < 10; i++) {
    await page.locator('button.bg-blue-600').first().click();
    await page.getByText(/æ¬¡ã®å•é¡Œã¸|ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º/).click();
  }

  // çµæœç”»é¢
  await expect(page.getByText(/10å•ä¸­\d+å•æ­£è§£ã—ã¾ã—ãŸ/)).toBeVisible();

  // ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤
  await page.getByText('ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤').click();

  // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã«æˆ»ã‚‹
  await expect(page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹')).toBeVisible();
});
```
</details>

<details>
<summary>E2E-04: Xã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ãŒæ­£ã—ã„URLã§æ–°è¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã</summary>

```ts
test('ã€Œçµæœã‚’Xã§ã‚·ã‚§ã‚¢ã€ãŒtwitter intent URLã‚’é–‹ã', async ({ page, context }) => {
  await page.goto('/');
  await page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹').click();

  for (let i = 0; i < 10; i++) {
    await page.locator('button.bg-blue-600').first().click();
    await page.getByText(/æ¬¡ã®å•é¡Œã¸|ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º/).click();
  }

  // æ–°ã—ã„ã‚¿ãƒ–ãŒé–‹ã‹ã‚Œã‚‹ã“ã¨ã‚’æ¤œçŸ¥
  const [newPage] = await Promise.all([
    context.waitForEvent('page'),
    page.getByText('çµæœã‚’Xã§ã‚·ã‚§ã‚¢').click(),
  ]);

  // é–‹ã‹ã‚ŒãŸURLãŒTwitter intentå½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’æ¤œè¨¼
  const url = newPage.url();
  expect(url).toContain('twitter.com/intent/tweet');
  expect(url).toContain(encodeURIComponent('åˆä»£ãƒã‚±ãƒ¢ãƒ³åå‰å½“ã¦ã‚¯ã‚¤ã‚º'));
  expect(url).toContain(encodeURIComponent('quiz-pokemon-151.vercel.app'));
});
```
</details>

<details>
<summary>E2E-05: ãƒ¢ãƒã‚¤ãƒ«ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã§ä¸€é€£ã®ãƒ•ãƒ­ãƒ¼ãŒæ“ä½œã§ãã‚‹</summary>

```ts
test('ãƒ¢ãƒã‚¤ãƒ«ï¼ˆ375Ã—667ï¼‰ã§å…¨ãƒ•ãƒ­ãƒ¼ãŒæ“ä½œå¯èƒ½', async ({ browser }) => {
  const context = await browser.newContext({
    viewport: { width: 375, height: 667 },
  });
  const page = await context.newPage();
  await page.goto('/');

  // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ãŒè¡¨ç¤ºãƒ»æ“ä½œå¯èƒ½
  await expect(page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹')).toBeVisible();
  await page.getByText('ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹').click();

  // æœ€åˆã®å•é¡Œã®é¸æŠè‚¢ãƒœã‚¿ãƒ³ãŒç”»é¢å†…ã«è¡¨ç¤ºã•ã‚Œã‚‹
  const firstButton = page.locator('button.bg-blue-600').first();
  await expect(firstButton).toBeVisible();
  await firstButton.click();

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”»é¢ãŒæ“ä½œå¯èƒ½
  const nextButton = page.getByText(/æ¬¡ã®å•é¡Œã¸|ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º/);
  await expect(nextButton).toBeVisible();
  await nextButton.click();

  // 2å•ç›®ä»¥é™ã‚‚æ“ä½œå¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
  await expect(page.locator('button.bg-blue-600').first()).toBeVisible();

  await context.close();
});
```
</details>

---

### ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (Vitest + React Testing Library)
npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom

# E2Eãƒ†ã‚¹ãƒˆ (Playwright)
npm install -D @playwright/test
npx playwright install
```

`vite.config.mts` ã« Vitest ã®è¨­å®šã‚’è¿½åŠ :
```ts
/// <reference types="vitest" />
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/test/setup.ts',
  },
});
```

`src/test/setup.ts`:
```ts
import '@testing-library/jest-dom';
```

`package.json` ã«è¿½åŠ ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ:
```json
{
  "scripts": {
    "test": "vitest",
    "test:e2e": "playwright test"
  }
}
```


## è¬è¾

ãƒã‚±ãƒ¢ãƒ³ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã¯"PokeAPI"(https://pokeapi.co/)ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚
